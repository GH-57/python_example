<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê·¸ì±…ì‚¬ ë²Œê¸ˆ ê³„ì‚°ê¸°</title>
    <style>
        body {
            font-family: 'Malgun Gothic', sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 10px;
            font-size: 2.2em;
        }
        
        .rules {
            background: #f8f9ff;
            border-left: 4px solid #667eea;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }
        
        .rules h3 {
            margin-top: 0;
            color: #667eea;
        }
        
        .person-card {
            background: #fff;
            border: 2px solid #e0e6ff;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            transition: all 0.3s ease;
        }
        
        .person-card:hover {
            border-color: #667eea;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.1);
        }
        
        .person-name {
            font-size: 1.2em;
            font-weight: bold;
            color: #333;
            margin-bottom: 15px;
        }
        
        .checkboxes {
            display: flex;
            gap: 20px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        
        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .checkbox-item input[type="checkbox"] {
            width: 20px;
            height: 20px;
            accent-color: #667eea;
        }
        
        .checkbox-item label {
            font-size: 1em;
            color: #555;
            cursor: pointer;
        }
        
        .fine-amount {
            font-size: 1.3em;
            font-weight: bold;
            text-align: right;
            padding: 10px;
            border-radius: 5px;
        }
        
        .fine-0 { background: #d4edda; color: #155724; }
        .fine-500 { background: #fff3cd; color: #856404; }
        .fine-1000 { background: #f8d7da; color: #721c24; }
        
        .total-section {
            background: #667eea;
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin-top: 30px;
            text-align: center;
        }
        
        .total-amount {
            font-size: 2em;
            font-weight: bold;
            margin-top: 10px;
        }
        
        .reset-btn {
            background: #764ba2;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-size: 1em;
            cursor: pointer;
            margin-top: 15px;
            transition: background 0.3s ease;
        }
        
        .reset-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        
        .week-selector {
            background: #e8f2ff;
            border: 2px solid #4a90e2;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }
        
        .week-selector h3 {
            margin-top: 0;
            color: #4a90e2;
        }
        
        .week-selector select {
            padding: 10px 15px;
            border: 2px solid #4a90e2;
            border-radius: 5px;
            font-size: 1.1em;
            background: white;
            cursor: pointer;
        }
        
        .admin-section {
            background: #f8f9ff;
            border: 2px solid #667eea;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }
        
        .admin-section h3 {
            margin-top: 0;
            color: #667eea;
        }
        
        .cumulative-stats {
            background: #f5f5f5;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            border-left: 4px solid #4a90e2;
        }
        
        .stats-title {
            font-weight: bold;
            color: #4a90e2;
            margin-bottom: 10px;
            font-size: 1.1em;
        }
        
        .stats-content {
            display: flex;
            flex-direction: column;
            gap: 5px;
            margin-bottom: 10px;
        }
        
        .stats-content span {
            font-size: 0.9em;
            color: #555;
        }
        
        .total-fine {
            font-weight: bold;
            color: #721c24;
            border-top: 1px solid #ddd;
            padding-top: 8px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“š ê·¸ì±…ì‚¬ ë²Œê¸ˆ ê³„ì‚°ê¸°</h1>
        
        <div class="rules">
            <h3>ë²Œê¸ˆ ê·œì¹™</h3>
            <p>â€¢ 1ê°œ ë¯¸ì‹¤ì‹œ = 0ì›</p>
            <p>â€¢ 2ê°œ ë¯¸ì‹¤ì‹œ = 500ì›</p>
            <p>â€¢ 3ê°œ ëª¨ë‘ ë¯¸ì‹¤ì‹œ = 1,000ì›</p>
        </div>
        
        <div id="people-container">
            <!-- 8ëª…ì˜ ì‚¬ëŒ ì¹´ë“œê°€ ì—¬ê¸°ì— ìƒì„±ë©ë‹ˆë‹¤ -->
        </div>
        
        <div class="week-selector">
            <h3>ì •ì‚°í•  ì£¼</h3>
            <select id="week-select" onchange="changeWeek()">
                <option value="1">1ì£¼ì°¨</option>
                <option value="2">2ì£¼ì°¨</option>
                <option value="3">3ì£¼ì°¨</option>
                <option value="4">4ì£¼ì°¨</option>
                <option value="5">5ì£¼ì°¨</option>
                <option value="6">6ì£¼ì°¨</option>
                <option value="7">7ì£¼ì°¨</option>
                <option value="8">8ì£¼ì°¨</option>
                <option value="9">9ì£¼ì°¨</option>
            </select>
        </div>
        
        <div class="admin-section">
            <h3>ê´€ë¦¬ì ëª¨ë“œ</h3>
            <input type="password" id="admin-password" placeholder="ë¹„ë°€ë²ˆí˜¸ ì…ë ¥" style="padding: 10px; border: 2px solid #ddd; border-radius: 5px; margin-right: 10px;">
            <button onclick="toggleAdminMode()" style="padding: 10px 20px; background: #667eea; color: white; border: none; border-radius: 5px; cursor: pointer;">ì ê¸ˆ í•´ì œ</button>
            <div id="admin-status" style="margin-top: 10px; font-weight: bold; color: #721c24;">ğŸ”’ í¸ì§‘ ì ê¸ˆë¨</div>
        </div>
        
        <div class="total-section">
            <h3>ì´ ë²Œê¸ˆì•¡</h3>
            <div class="total-amount" id="total-amount">0ì›</div>
            <button class="reset-btn" onclick="resetAll()" id="reset-btn" disabled>í˜„ì¬ ì£¼ì°¨ ì´ˆê¸°í™”</button>
        </div>
    </div>

    <script>
        // ê´€ë¦¬ì ëª¨ë“œ ë³€ìˆ˜
        let isAdminMode = false;
        const adminPassword = '1036'; // ì›í•˜ëŠ” ë¹„ë°€ë²ˆí˜¸ë¡œ ë³€ê²½í•˜ì„¸ìš”
        let currentWeek = 1;
        
        // 9ì£¼ì¹˜ ë°ì´í„°ë¥¼ ì €ì¥í•  ê°ì²´
        let weeklyData = {};
        
        // ì´ˆê¸°í™” í•¨ìˆ˜
        function initializeWeeklyData() {
            for (let week = 1; week <= 9; week++) {
                weeklyData[week] = {};
                people.forEach((person, index) => {
                    weeklyData[week][index] = {
                        task1: false,
                        task2: false,
                        task3: false
                    };
                });
            }
        }
        
        // 8ëª…ì˜ ì‚¬ëŒ ë°ì´í„°
        const people = [
            'ì‚¬ëŒ ', 'ì‚¬ëŒ 2', 'ì‚¬ëŒ 3', 'ì‚¬ëŒ 4',
            'ì‚¬ëŒ 5', 'ì‚¬ëŒ 6', 'ì‚¬ëŒ 7', 'ì‚¬ëŒ 8'
        ];
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì‚¬ëŒ ì¹´ë“œë“¤ ìƒì„±
        function initializePeople() {
            const container = document.getElementById('people-container');
            
            people.forEach((person, index) => {
                const personCard = document.createElement('div');
                personCard.className = 'person-card';
                personCard.innerHTML = `
                    <div class="person-name">${person}</div>
                    <div class="checkboxes">
                        <div class="checkbox-item">
                            <input type="checkbox" id="task1_${index}" onchange="calculateFine(${index})" disabled>
                            <label for="task1_${index}">ì£¼ì¼ ë³¸ë¬¸ ë¬µìƒ</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="task2_${index}" onchange="calculateFine(${index})" disabled>
                            <label for="task2_${index}">ì„±ê²½ í†µë…</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="task3_${index}" onchange="calculateFine(${index})" disabled>
                            <label for="task3_${index}">êµë¦¬ë¬¸ë‹µ ì½ê¸°</label>
                        </div>
                    </div>
                    <div class="fine-amount fine-0" id="fine_${index}">ë²Œê¸ˆ: 0ì›</div>
                    <div class="cumulative-stats" id="stats_${index}">
                        <div class="stats-title">ëˆ„ì  ê¸°ë¡</div>
                        <div class="stats-content">
                            <span>ì£¼ì¼ ë³¸ë¬¸ ë¬µìƒ: <span id="task1_count_${index}">0</span>/9ì£¼</span>
                            <span>ì„±ê²½ í†µë…: <span id="task2_count_${index}">0</span>/9ì£¼</span>
                            <span>êµë¦¬ë¬¸ë‹µ ì½ê¸°: <span id="task3_count_${index}">0</span>/9ì£¼</span>
                        </div>
                        <div class="total-fine">ì´ ëˆ„ì  ë²Œê¸ˆ: <span id="total_fine_${index}">0ì›</span></div>
                    </div>
                `;
                container.appendChild(personCard);
            });
        }
        
        // ì£¼ì°¨ ë³€ê²½ í•¨ìˆ˜
        function changeWeek() {
            // í˜„ì¬ ë°ì´í„° ì €ì¥
            saveCurrentWeekData();
            
            // ìƒˆë¡œìš´ ì£¼ì°¨ë¡œ ë³€ê²½
            currentWeek = parseInt(document.getElementById('week-select').value);
            
            // ìƒˆë¡œìš´ ì£¼ì°¨ ë°ì´í„° ë¡œë“œ
            loadWeekData(currentWeek);
        }
        
        // í˜„ì¬ ì£¼ì°¨ ë°ì´í„° ì €ì¥
        function saveCurrentWeekData() {
            people.forEach((person, index) => {
                weeklyData[currentWeek][index] = {
                    task1: document.getElementById(`task1_${index}`).checked,
                    task2: document.getElementById(`task2_${index}`).checked,
                    task3: document.getElementById(`task3_${index}`).checked
                };
            });
        }
        
        // ì£¼ì°¨ ë°ì´í„° ë¡œë“œ
        function loadWeekData(week) {
            people.forEach((person, index) => {
                document.getElementById(`task1_${index}`).checked = weeklyData[week][index].task1;
                document.getElementById(`task2_${index}`).checked = weeklyData[week][index].task2;
                document.getElementById(`task3_${index}`).checked = weeklyData[week][index].task3;
                calculateFine(index);
            });
        }
        
        // ëª¨ë“  ì‚¬ëŒì˜ ëˆ„ì  í†µê³„ ì—…ë°ì´íŠ¸
        function updateAllCumulativeStats() {
            people.forEach((person, index) => {
                updateCumulativeStats(index);
            });
        }
        
        // ê°œë³„ ë²Œê¸ˆ ê³„ì‚°
        function calculateFine(personIndex) {
            const task1 = document.getElementById(`task1_${personIndex}`).checked;
            const task2 = document.getElementById(`task2_${personIndex}`).checked;
            const task3 = document.getElementById(`task3_${personIndex}`).checked;
            
            // í˜„ì¬ ë°ì´í„°ë¥¼ weeklyDataì—ë„ ì €ì¥
            weeklyData[currentWeek][personIndex] = { task1, task2, task3 };
            
            // ë¯¸ì‹¤ì‹œ ê°œìˆ˜ ê³„ì‚° (ì²´í¬ë˜ì§€ ì•Šì€ ê²ƒì˜ ê°œìˆ˜)
            const uncompletedTasks = [task1, task2, task3].filter(task => !task).length;
            
            let fine = 0;
            let fineClass = 'fine-0';
            
            if (uncompletedTasks === 1) {
                fine = 0;
                fineClass = 'fine-0';
            } else if (uncompletedTasks === 2) {
                fine = 500;
                fineClass = 'fine-500';
            } else if (uncompletedTasks === 3) {
                fine = 1000;
                fineClass = 'fine-1000';
            }
            
            const fineElement = document.getElementById(`fine_${personIndex}`);
            fineElement.textContent = `ë²Œê¸ˆ: ${fine.toLocaleString()}ì›`;
            fineElement.className = `fine-amount ${fineClass}`;
            
            // ëˆ„ì  í†µê³„ ì—…ë°ì´íŠ¸
            updateCumulativeStats(personIndex);
            
            calculateTotal();
        }
        
        // ëˆ„ì  í†µê³„ ì—…ë°ì´íŠ¸
        function updateCumulativeStats(personIndex) {
            let task1Count = 0;
            let task2Count = 0;
            let task3Count = 0;
            let totalFine = 0;
            
            // ëª¨ë“  ì£¼ì°¨ë¥¼ ìˆœíšŒí•˜ë©´ì„œ ëˆ„ì  ë°ì´í„° ê³„ì‚°
            for (let week = 1; week <= 9; week++) {
                const weekData = weeklyData[week][personIndex];
                if (weekData.task1) task1Count++;
                if (weekData.task2) task2Count++;
                if (weekData.task3) task3Count++;
                
                // í•´ë‹¹ ì£¼ì°¨ì˜ ë²Œê¸ˆ ê³„ì‚°
                const uncompletedTasks = [weekData.task1, weekData.task2, weekData.task3].filter(task => !task).length;
                if (uncompletedTasks === 2) {
                    totalFine += 500;
                } else if (uncompletedTasks === 3) {
                    totalFine += 1000;
                }
            }
            
            // í™”ë©´ì— ì—…ë°ì´íŠ¸
            document.getElementById(`task1_count_${personIndex}`).textContent = task1Count;
            document.getElementById(`task2_count_${personIndex}`).textContent = task2Count;
            document.getElementById(`task3_count_${personIndex}`).textContent = task3Count;
            document.getElementById(`total_fine_${personIndex}`).textContent = `${totalFine.toLocaleString()}ì›`;
        }
        
        // ì´ ë²Œê¸ˆ ê³„ì‚°
        function calculateTotal() {
            let total = 0;
            
            people.forEach((person, index) => {
                const task1 = document.getElementById(`task1_${index}`).checked;
                const task2 = document.getElementById(`task2_${index}`).checked;
                const task3 = document.getElementById(`task3_${index}`).checked;
                
                const uncompletedTasks = [task1, task2, task3].filter(task => !task).length;
                
                if (uncompletedTasks === 2) {
                    total += 500;
                } else if (uncompletedTasks === 3) {
                    total += 1000;
                }
            });
            
            document.getElementById('total-amount').textContent = `${total.toLocaleString()}ì›`;
        }
        
        // ê´€ë¦¬ì ëª¨ë“œ í† ê¸€
        function toggleAdminMode() {
            const password = document.getElementById('admin-password').value;
            const statusElement = document.getElementById('admin-status');
            const resetBtn = document.getElementById('reset-btn');
            
            if (!isAdminMode && password === adminPassword) {
                isAdminMode = true;
                statusElement.textContent = 'ğŸ”“ í¸ì§‘ ê°€ëŠ¥';
                statusElement.style.color = '#155724';
                resetBtn.disabled = false;
                
                // ëª¨ë“  ì²´í¬ë°•ìŠ¤ í™œì„±í™”
                people.forEach((person, index) => {
                    document.getElementById(`task1_${index}`).disabled = false;
                    document.getElementById(`task2_${index}`).disabled = false;
                    document.getElementById(`task3_${index}`).disabled = false;
                });
                
                alert('ê´€ë¦¬ì ëª¨ë“œê°€ í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤.');
            } else if (isAdminMode) {
                isAdminMode = false;
                statusElement.textContent = 'ğŸ”’ í¸ì§‘ ì ê¸ˆë¨';
                statusElement.style.color = '#721c24';
                resetBtn.disabled = true;
                
                // ëª¨ë“  ì²´í¬ë°•ìŠ¤ ë¹„í™œì„±í™”
                people.forEach((person, index) => {
                    document.getElementById(`task1_${index}`).disabled = true;
                    document.getElementById(`task2_${index}`).disabled = true;
                    document.getElementById(`task3_${index}`).disabled = true;
                });
                
                document.getElementById('admin-password').value = '';
                alert('í¸ì§‘ì´ ì ê¸ˆë˜ì—ˆìŠµë‹ˆë‹¤.');
            } else {
                alert('ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤.');
                document.getElementById('admin-password').value = '';
            }
        }
        
        // ì „ì²´ ì´ˆê¸°í™” (í˜„ì¬ ì£¼ì°¨ë§Œ)
        function resetAll() {
            if (!isAdminMode) return;
            
            if (confirm(`${currentWeek}ì£¼ì°¨ ë°ì´í„°ë¥¼ ëª¨ë‘ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {
                people.forEach((person, index) => {
                    document.getElementById(`task1_${index}`).checked = false;
                    document.getElementById(`task2_${index}`).checked = false;
                    document.getElementById(`task3_${index}`).checked = false;
                    
                    // weeklyDataë„ ì´ˆê¸°í™”
                    weeklyData[currentWeek][index] = {
                        task1: false,
                        task2: false,
                        task3: false
                    };
                    
                    const fineElement = document.getElementById(`fine_${index}`);
                    fineElement.textContent = 'ë²Œê¸ˆ: 0ì›';
                    fineElement.className = 'fine-amount fine-0';
                    
                    // ëˆ„ì  í†µê³„ ì—…ë°ì´íŠ¸
                    updateCumulativeStats(index);
                });
                
                document.getElementById('total-amount').textContent = '0ì›';
            }
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        window.onload = function() {
            initializeWeeklyData();
            initializePeople();
            updateAllCumulativeStats();
        };
    </script>
</body>
</html>