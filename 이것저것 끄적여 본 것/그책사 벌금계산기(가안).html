<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Í∑∏Ï±ÖÏÇ¨ Î≤åÍ∏à Í≥ÑÏÇ∞Í∏∞</title>
    <style>
        body {
            font-family: 'Malgun Gothic', sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 10px;
            font-size: 2.2em;
        }
        
        .rules {
            background: #f8f9ff;
            border-left: 4px solid #667eea;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }
        
        .rules h3 {
            margin-top: 0;
            color: #667eea;
        }
        
        .person-card {
            background: #fff;
            border: 2px solid #e0e6ff;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            transition: all 0.3s ease;
        }
        
        .person-card:hover {
            border-color: #667eea;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.1);
        }
        
        .person-name {
            font-size: 1.2em;
            font-weight: bold;
            color: #333;
            margin-bottom: 15px;
        }
        
        .checkboxes {
            display: flex;
            gap: 20px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        
        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .checkbox-item input[type="checkbox"] {
            width: 20px;
            height: 20px;
            accent-color: #667eea;
        }
        
        .checkbox-item label {
            font-size: 1em;
            color: #555;
            cursor: pointer;
        }
        
        .fine-amount {
            font-size: 1.3em;
            font-weight: bold;
            text-align: right;
            padding: 10px;
            border-radius: 5px;
        }
        
        .fine-0 { background: #d4edda; color: #155724; }
        .fine-500 { background: #fff3cd; color: #856404; }
        .fine-1000 { background: #f8d7da; color: #721c24; }
        
        .total-section {
            background: #667eea;
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin-top: 30px;
            text-align: center;
        }
        
        .total-amount {
            font-size: 2em;
            font-weight: bold;
            margin-top: 10px;
        }
        
        .reset-btn {
            background: #764ba2;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-size: 1em;
            cursor: pointer;
            margin-top: 15px;
            transition: background 0.3s ease;
        }
        
        .reset-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        
        .week-selector {
            background: #e8f2ff;
            border: 2px solid #4a90e2;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }
        
        .week-selector h3 {
            margin-top: 0;
            color: #4a90e2;
        }
        
        .week-selector select {
            padding: 10px 15px;
            border: 2px solid #4a90e2;
            border-radius: 5px;
            font-size: 1.1em;
            background: white;
            cursor: pointer;
        }
        
        .admin-section {
            background: #f8f9ff;
            border: 2px solid #667eea;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }
        
        .admin-section h3 {
            margin-top: 0;
            color: #667eea;
        }
        
        .cumulative-stats {
            background: #f5f5f5;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            border-left: 4px solid #4a90e2;
        }
        
        .stats-title {
            font-weight: bold;
            color: #4a90e2;
            margin-bottom: 10px;
            font-size: 1.1em;
        }
        
        .stats-content {
            display: flex;
            flex-direction: column;
            gap: 5px;
            margin-bottom: 10px;
        }
        
        .stats-content span {
            font-size: 0.9em;
            color: #555;
        }
        
        .total-fine {
            font-weight: bold;
            color: #721c24;
            border-top: 1px solid #ddd;
            padding-top: 8px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìö Í∑∏Ï±ÖÏÇ¨ Î≤åÍ∏à Í≥ÑÏÇ∞Í∏∞</h1>
        
        <div class="rules">
            <h3>Î≤åÍ∏à Í∑úÏπô</h3>
            <p>‚Ä¢ 1Í∞ú ÎØ∏Ïã§Ïãú = 0Ïõê</p>
            <p>‚Ä¢ 2Í∞ú ÎØ∏Ïã§Ïãú = 500Ïõê</p>
            <p>‚Ä¢ 3Í∞ú Î™®Îëê ÎØ∏Ïã§Ïãú = 1,000Ïõê</p>
        </div>
        
        <div id="people-container">
            <!-- 8Î™ÖÏùò ÏÇ¨Îûå Ïπ¥ÎìúÍ∞Ä Ïó¨Í∏∞Ïóê ÏÉùÏÑ±Îê©ÎãàÎã§ -->
        </div>
        
        <div class="week-selector">
            <h3>Ï†ïÏÇ∞Ìï† Ï£º</h3>
            <select id="week-select" onchange="changeWeek()">
                <option value="1">1Ï£ºÏ∞®</option>
                <option value="2">2Ï£ºÏ∞®</option>
                <option value="3">3Ï£ºÏ∞®</option>
                <option value="4">4Ï£ºÏ∞®</option>
                <option value="5">5Ï£ºÏ∞®</option>
                <option value="6">6Ï£ºÏ∞®</option>
                <option value="7">7Ï£ºÏ∞®</option>
                <option value="8">8Ï£ºÏ∞®</option>
                <option value="9">9Ï£ºÏ∞®</option>
            </select>
        </div>
        
        <div class="admin-section">
            <h3>Í¥ÄÎ¶¨Ïûê Î™®Îìú</h3>
            <input type="password" id="admin-password" placeholder="ÎπÑÎ∞ÄÎ≤àÌò∏ ÏûÖÎ†•" style="padding: 10px; border: 2px solid #ddd; border-radius: 5px; margin-right: 10px;">
            <button onclick="toggleAdminMode()" style="padding: 10px 20px; background: #667eea; color: white; border: none; border-radius: 5px; cursor: pointer;">Ïû†Í∏à Ìï¥Ï†ú</button>
            <div id="admin-status" style="margin-top: 10px; font-weight: bold; color: #721c24;">üîí Ìé∏Ïßë Ïû†Í∏àÎê®</div>
        </div>
        
        <div class="total-section">
            <h3>Ï¥ù Î≤åÍ∏àÏï°</h3>
            <div class="total-amount" id="total-amount">0Ïõê</div>
            <button class="reset-btn" onclick="resetAll()" id="reset-btn" disabled>ÌòÑÏû¨ Ï£ºÏ∞® Ï¥àÍ∏∞Ìôî</button>
        </div>
    </div>

    <script>
        // Í¥ÄÎ¶¨Ïûê Î™®Îìú Î≥ÄÏàò
        let isAdminMode = false;
        const adminPassword = '1036'; // ÏõêÌïòÎäî ÎπÑÎ∞ÄÎ≤àÌò∏Î°ú Î≥ÄÍ≤ΩÌïòÏÑ∏Ïöî
        let currentWeek = 1;
        
        // 9Ï£ºÏπò Îç∞Ïù¥ÌÑ∞Î•º Ï†ÄÏû•Ìï† Í∞ùÏ≤¥
        let weeklyData = {};
        
        // Ï¥àÍ∏∞Ìôî Ìï®Ïàò
        function initializeWeeklyData() {
            for (let week = 1; week <= 9; week++) {
                weeklyData[week] = {};
                people.forEach((person, index) => {
                    weeklyData[week][index] = {
                        task1: false,
                        task2: false,
                        task3: false
                    };
                });
            }
        }
        
        // 8Î™ÖÏùò ÏÇ¨Îûå Îç∞Ïù¥ÌÑ∞
        const people = [
            'ÏÇ¨Îûå ', 'ÏÇ¨Îûå 2', 'ÏÇ¨Îûå 3', 'ÏÇ¨Îûå 4',
            'ÏÇ¨Îûå 5', 'ÏÇ¨Îûå 6', 'ÏÇ¨Îûå 7', 'ÏÇ¨Îûå 8'
        ];
        
        // ÌéòÏù¥ÏßÄ Î°úÎìú Ïãú ÏÇ¨Îûå Ïπ¥ÎìúÎì§ ÏÉùÏÑ±
        function initializePeople() {
            const container = document.getElementById('people-container');
            
            people.forEach((person, index) => {
                const personCard = document.createElement('div');
                personCard.className = 'person-card';
                personCard.innerHTML = `
                    <div class="person-name">${person}</div>
                    <div class="checkboxes">
                        <div class="checkbox-item">
                            <input type="checkbox" id="task1_${index}" onchange="calculateFine(${index})" disabled>
                            <label for="task1_${index}">Ï£ºÏùº Î≥∏Î¨∏ Î¨µÏÉÅ</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="task2_${index}" onchange="calculateFine(${index})" disabled>
                            <label for="task2_${index}">ÏÑ±Í≤Ω ÌÜµÎèÖ</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="task3_${index}" onchange="calculateFine(${index})" disabled>
                            <label for="task3_${index}">ÍµêÎ¶¨Î¨∏Îãµ ÏùΩÍ∏∞</label>
                        </div>
                    </div>
                    <div class="fine-amount fine-0" id="fine_${index}">Î≤åÍ∏à: 0Ïõê</div>
                    <div class="cumulative-stats" id="stats_${index}">
                        <div class="stats-title">ÎàÑÏ†Å Í∏∞Î°ù</div>
                        <div class="stats-content">
                            <span>Ï£ºÏùº Î≥∏Î¨∏ Î¨µÏÉÅ: <span id="task1_count_${index}">0</span>/9Ï£º</span>
                            <span>ÏÑ±Í≤Ω ÌÜµÎèÖ: <span id="task2_count_${index}">0</span>/9Ï£º</span>
                            <span>ÍµêÎ¶¨Î¨∏Îãµ ÏùΩÍ∏∞: <span id="task3_count_${index}">0</span>/9Ï£º</span>
                        </div>
                        <div class="total-fine">Ï¥ù ÎàÑÏ†Å Î≤åÍ∏à: <span id="total_fine_${index}">0Ïõê</span></div>
                    </div>
                `;
                container.appendChild(personCard);
            });
        }
        
        // Ï£ºÏ∞® Î≥ÄÍ≤Ω Ìï®Ïàò
        function changeWeek() {
            // ÌòÑÏû¨ Îç∞Ïù¥ÌÑ∞ Ï†ÄÏû•
            saveCurrentWeekData();
            
            // ÏÉàÎ°úÏö¥ Ï£ºÏ∞®Î°ú Î≥ÄÍ≤Ω
            currentWeek = parseInt(document.getElementById('week-select').value);
            
            // ÏÉàÎ°úÏö¥ Ï£ºÏ∞® Îç∞Ïù¥ÌÑ∞ Î°úÎìú
            loadWeekData(currentWeek);
        }
        
        // ÌòÑÏû¨ Ï£ºÏ∞® Îç∞Ïù¥ÌÑ∞ Ï†ÄÏû•
        function saveCurrentWeekData() {
            people.forEach((person, index) => {
                weeklyData[currentWeek][index] = {
                    task1: document.getElementById(`task1_${index}`).checked,
                    task2: document.getElementById(`task2_${index}`).checked,
                    task3: document.getElementById(`task3_${index}`).checked
                };
            });
        }
        
        // Ï£ºÏ∞® Îç∞Ïù¥ÌÑ∞ Î°úÎìú
        function loadWeekData(week) {
            people.forEach((person, index) => {
                document.getElementById(`task1_${index}`).checked = weeklyData[week][index].task1;
                document.getElementById(`task2_${index}`).checked = weeklyData[week][index].task2;
                document.getElementById(`task3_${index}`).checked = weeklyData[week][index].task3;
                calculateFine(index);
            });
        }
        
        // Î™®Îì† ÏÇ¨ÎûåÏùò ÎàÑÏ†Å ÌÜµÍ≥Ñ ÏóÖÎç∞Ïù¥Ìä∏
        function updateAllCumulativeStats() {
            people.forEach((person, index) => {
                updateCumulativeStats(index);
            });
        }
        
        // Í∞úÎ≥Ñ Î≤åÍ∏à Í≥ÑÏÇ∞
        function calculateFine(personIndex) {
            const task1 = document.getElementById(`task1_${personIndex}`).checked;
            const task2 = document.getElementById(`task2_${personIndex}`).checked;
            const task3 = document.getElementById(`task3_${personIndex}`).checked;
            
            // ÌòÑÏû¨ Îç∞Ïù¥ÌÑ∞Î•º weeklyDataÏóêÎèÑ Ï†ÄÏû•
            weeklyData[currentWeek][personIndex] = { task1, task2, task3 };
            
            // ÎØ∏Ïã§Ïãú Í∞úÏàò Í≥ÑÏÇ∞ (Ï≤¥ÌÅ¨ÎêòÏßÄ ÏïäÏùÄ Í≤ÉÏùò Í∞úÏàò)
            const uncompletedTasks = [task1, task2, task3].filter(task => !task).length;
            
            let fine = 0;
            let fineClass = 'fine-0';
            
            if (uncompletedTasks === 1) {
                fine = 0;
                fineClass = 'fine-0';
            } else if (uncompletedTasks === 2) {
                fine = 500;
                fineClass = 'fine-500';
            } else if (uncompletedTasks === 3) {
                fine = 1000;
                fineClass = 'fine-1000';
            }
            
            const fineElement = document.getElementById(`fine_${personIndex}`);
            fineElement.textContent = `Î≤åÍ∏à: ${fine.toLocaleString()}Ïõê`;
            fineElement.className = `fine-amount ${fineClass}`;
            
            // ÎàÑÏ†Å ÌÜµÍ≥Ñ ÏóÖÎç∞Ïù¥Ìä∏
            updateCumulativeStats(personIndex);
            
            calculateTotal();
        }
        
        // ÎàÑÏ†Å ÌÜµÍ≥Ñ ÏóÖÎç∞Ïù¥Ìä∏
        function updateCumulativeStats(personIndex) {
            let task1Count = 0;
            let task2Count = 0;
            let task3Count = 0;
            let totalFine = 0;
            
            // Î™®Îì† Ï£ºÏ∞®Î•º ÏàúÌöåÌïòÎ©¥ÏÑú ÎàÑÏ†Å Îç∞Ïù¥ÌÑ∞ Í≥ÑÏÇ∞
            for (let week = 1; week <= 9; week++) {
                const weekData = weeklyData[week][personIndex];
                if (weekData.task1) task1Count++;
                if (weekData.task2) task2Count++;
                if (weekData.task3) task3Count++;
                
                // Ìï¥Îãπ Ï£ºÏ∞®Ïùò Î≤åÍ∏à Í≥ÑÏÇ∞
                const uncompletedTasks = [weekData.task1, weekData.task2, weekData.task3].filter(task => !task).length;
                if (uncompletedTasks === 2) {
                    totalFine += 500;
                } else if (uncompletedTasks === 3) {
                    totalFine += 1000;
                }
            }
            
            // ÌôîÎ©¥Ïóê ÏóÖÎç∞Ïù¥Ìä∏
            document.getElementById(`task1_count_${personIndex}`).textContent = task1Count;
            document.getElementById(`task2_count_${personIndex}`).textContent = task2Count;
            document.getElementById(`task3_count_${personIndex}`).textContent = task3Count;
            document.getElementById(`total_fine_${personIndex}`).textContent = `${totalFine.toLocaleString()}Ïõê`;
        }
        
        // Ï¥ù Î≤åÍ∏à Í≥ÑÏÇ∞
        function calculateTotal() {
            let total = 0;
            
            people.forEach((person, index) => {
                const task1 = document.getElementById(`task1_${index}`).checked;
                const task2 = document.getElementById(`task2_${index}`).checked;
                const task3 = document.getElementById(`task3_${index}`).checked;
                
                const uncompletedTasks = [task1, task2, task3].filter(task => !task).length;
                
                if (uncompletedTasks === 2) {
                    total += 500;
                } else if (uncompletedTasks === 3) {
                    total += 1000;
                }
            });
            
            document.getElementById('total-amount').textContent = `${total.toLocaleString()}Ïõê`;
        }
        
        // Í¥ÄÎ¶¨Ïûê Î™®Îìú ÌÜ†Í∏Ä
        function toggleAdminMode() {
            const password = document.getElementById('admin-password').value;
            const statusElement = document.getElementById('admin-status');
            const resetBtn = document.getElementById('reset-btn');
            
            if (!isAdminMode && password === adminPassword) {
                isAdminMode = true;
                statusElement.textContent = 'üîì Ìé∏Ïßë Í∞ÄÎä•';
                statusElement.style.color = '#155724';
                resetBtn.disabled = false;
                
                // Î™®Îì† Ï≤¥ÌÅ¨Î∞ïÏä§ ÌôúÏÑ±Ìôî
                people.forEach((person, index) => {
                    document.getElementById(`task1_${index}`).disabled = false;
                    document.getElementById(`task2_${index}`).disabled = false;
                    document.getElementById(`task3_${index}`).disabled = false;
                });
                
                alert('Í¥ÄÎ¶¨Ïûê Î™®ÎìúÍ∞Ä ÌôúÏÑ±ÌôîÎêòÏóàÏäµÎãàÎã§.');
            } else if (isAdminMode) {
                isAdminMode = false;
                statusElement.textContent = 'üîí Ìé∏Ïßë Ïû†Í∏àÎê®';
                statusElement.style.color = '#721c24';
                resetBtn.disabled = true;
                
                // Î™®Îì† Ï≤¥ÌÅ¨Î∞ïÏä§ ÎπÑÌôúÏÑ±Ìôî
                people.forEach((person, index) => {
                    document.getElementById(`task1_${index}`).disabled = true;
                    document.getElementById(`task2_${index}`).disabled = true;
                    document.getElementById(`task3_${index}`).disabled = true;
                });
                
                document.getElementById('admin-password').value = '';
                alert('Ìé∏ÏßëÏù¥ Ïû†Í∏àÎêòÏóàÏäµÎãàÎã§.');
            } else {
                alert('ÎπÑÎ∞ÄÎ≤àÌò∏Í∞Ä ÌãÄÎ†∏ÏäµÎãàÎã§.');
                document.getElementById('admin-password').value = '';
            }
        }
        
        // Ï†ÑÏ≤¥ Ï¥àÍ∏∞Ìôî (ÌòÑÏû¨ Ï£ºÏ∞®Îßå)
        function resetAll() {
            if (!isAdminMode) return;
            
            if (confirm(`${currentWeek}Ï£ºÏ∞® Îç∞Ïù¥ÌÑ∞Î•º Î™®Îëê Ï¥àÍ∏∞ÌôîÌïòÏãúÍ≤†ÏäµÎãàÍπå?`)) {
                people.forEach((person, index) => {
                    document.getElementById(`task1_${index}`).checked = false;
                    document.getElementById(`task2_${index}`).checked = false;
                    document.getElementById(`task3_${index}`).checked = false;
                    
                    // weeklyDataÎèÑ Ï¥àÍ∏∞Ìôî
                    weeklyData[currentWeek][index] = {
                        task1: false,
                        task2: false,
                        task3: false
                    };
                    
                    const fineElement = document.getElementById(`fine_${index}`);
                    fineElement.textContent = 'Î≤åÍ∏à: 0Ïõê';
                    fineElement.className = 'fine-amount fine-0';
                    
                    // ÎàÑÏ†Å ÌÜµÍ≥Ñ ÏóÖÎç∞Ïù¥Ìä∏
                    updateCumulativeStats(index);
                });
                
                document.getElementById('total-amount').textContent = '0Ïõê';
            }
        }
        
        // ÌéòÏù¥ÏßÄ Î°úÎìú Ïãú Ï¥àÍ∏∞Ìôî
        window.onload = function() {
            initializeWeeklyData();
            initializePeople();
            updateAllCumulativeStats();
        };
    </script>
</body>
</html>